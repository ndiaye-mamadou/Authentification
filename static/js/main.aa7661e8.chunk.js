(this.webpackJsonpauthreact=this.webpackJsonpauthreact||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(7),u=n.n(c),r=n(17),i=n.n(r),s=n(10),o=n(18),j=n.n(o),l=n(14);l.a.initializeApp({apiKey:"AIzaSyD36HVU7jbdAG34OCEGZGyN1ExnQ0T8QVM",authDomain:"my-react-authen.firebaseapp.com",projectId:"my-react-authen",storageBucket:"my-react-authen.appspot.com",messagingSenderId:"1869163297",appId:"1:1869163297:web:9d4bbae2673d108eb96c60"});var d=l.a,b=Object(c.createContext)(null),h=function(){var e=Object(c.useContext)(b),t=Object(c.useState)(""),n=Object(s.a)(t,2),u=n[0],r=n[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),j=o[0],l=o[1];console.log(e);return Object(a.jsxs)("div",{className:"create",children:[Object(a.jsx)("h4",{children:"D\xe9poser une citation"}),Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("input",{type:"text",placeholder:"Auteur",value:u,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)("textarea",{type:"text",placeholder:"Citation",value:j,onChange:function(e){return l(e.target.value)}}),Object(a.jsx)("button",{onClick:function(){var t=d.database().ref("quotesDB"),n={uid:e,author:u,text:j};t.push(n),r(""),l("")},children:"Create"})]})]})},O=n(20),x=function(e){var t=e.item,n=Object(c.useState)(!1),u=Object(s.a)(n,2),r=u[0],i=u[1],o=Object(c.useState)(null),j=Object(s.a)(o,2),l=j[0],h=j[1],O=Object(c.useState)(null),x=Object(s.a)(O,2),p=x[0],f=x[1],v=Object(c.useContext)(b),m=function(){return t.uid===v};m();return Object(a.jsxs)("li",{children:[!1===r&&Object(a.jsxs)("div",{className:"item-container",children:[Object(a.jsxs)("p",{children:['"',t.text,'"']}),Object(a.jsx)("h6",{children:m()?d.auth().currentUser.displayName:t.author}),m()&&Object(a.jsxs)("div",{className:"buttons-container",children:[Object(a.jsx)("button",{onClick:function(){return i(!r)},children:"Update"}),Object(a.jsx)("button",{onClick:function(){d.database().ref("quotesDB").child(t.id).remove(),m()},children:"Delete"})]})]}),r&&Object(a.jsxs)("div",{className:"item-container-update",children:[Object(a.jsx)("textarea",{defaultValue:t.text,onChange:function(e){return f(e.target.value)}}),Object(a.jsx)("input",{type:"text",defaultValue:t.author,onChange:function(e){return h(e.target.value)}}),Object(a.jsx)("button",{onClick:function(){var e=d.database().ref("quotesDB").child(t.id);null!==l&&e.update({author:l}),null!==p&&e.update({text:p}),i(!1)},children:"Validate update"})]})]})},p=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],u=t[1];return Object(c.useEffect)((function(){d.database().ref("quotesDB").on("value",(function(e){console.log(e.val());var t=e.val(),n=[];for(var a in t)n.push(Object(O.a)({id:a},t[a]));u(n)}))}),[]),Object(a.jsx)("div",{className:"read",children:Object(a.jsx)("ul",{children:n&&n.map((function(e,t){return Object(a.jsx)(x,{item:e},t)}))})})},f=function(){return Object(a.jsxs)("main",{children:[Object(a.jsxs)("nav",{children:[Object(a.jsx)("h1",{children:"React Crud"}),Object(a.jsxs)("h4",{children:["Bonjour ",d.auth().currentUser.displayName]}),Object(a.jsx)("div",{onClick:function(){return d.auth().signOut()},children:"Se d\xe9connecter"})]}),Object(a.jsx)(h,{}),Object(a.jsx)(p,{})]})},v=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],u=t[1],r=Object(c.useState)(null),i=Object(s.a)(r,2),o=i[0],l=i[1],h={signInFlow:"popup",signInOptions:[d.auth.GoogleAuthProvider.PROVIDER_ID,d.auth.FacebookAuthProvider.PROVIDER_ID,d.auth.TwitterAuthProvider.PROVIDER_ID,d.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}};return Object(c.useEffect)((function(){d.auth().onAuthStateChanged((function(e){u(!!e),l(e.uid)}))}),[]),Object(a.jsx)(b.Provider,{value:o,children:Object(a.jsx)("div",{className:"App",children:n?Object(a.jsx)(f,{}):Object(a.jsxs)("div",{className:"login-page",children:[Object(a.jsx)("h1",{children:"React Crud"}),Object(a.jsx)(j.a,{uiConfig:h,firebaseAuth:d.auth()})]})})})};n(36);i.a.render(Object(a.jsx)(u.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.aa7661e8.chunk.js.map